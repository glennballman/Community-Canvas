Step 1: Create the Hooks File
Tell Replit to create this new file:
File: client/src/hooks/useDriverQualifications.ts
typescript// ============================================
// DRIVER QUALIFICATION HOOKS
// Provides data fetching for qualification checks
// ============================================

import { useQuery } from '@tanstack/react-query';

// ============================================
// TYPES
// ============================================

interface TrailerQualification {
  trailerId: string;
  trailerName: string;
  trailerType: string;
  isQualified: boolean;
  issueCount: number;
  warningCount: number;
  primaryIssue: string | null;
}

interface DriverQualificationSummary {
  driver: {
    id: string;
    name: string;
    licenseClass: string | null;
    licenseProvince: string | null;
    licenseExpiry: string | null;
    endorsements: {
      airBrake: boolean;
      houseTrailer: boolean;
      heavyTrailer: boolean;
    };
    medicalExpiry: string | null;
    experience: {
      fifthWheel: boolean;
      gooseneck: boolean;
      horseTrailer: boolean;
      boatLaunching: boolean;
    };
  };
  summary: {
    qualifiedFor: number;
    totalTrailers: number;
    percentageQualified: number;
  };
  trailerQualifications: TrailerQualification[];
}

interface QualificationCheckResult {
  driverId: string;
  driverName: string;
  trailerId: string;
  trailerName: string;
  trailerType: string;
  province: string;
  qualification: {
    isQualified: boolean;
    issues: string[];
    warnings: string[];
    requiredEndorsements: string[];
  };
  checkedAt: string;
}

// ============================================
// HOOK: Get full qualification summary for a driver
// Shows qualification status for ALL trailers
// ============================================

export function useDriverQualifications(driverId: string | null) {
  return useQuery<DriverQualificationSummary>({
    queryKey: ['driver-qualifications', driverId],
    queryFn: async () => {
      if (!driverId) throw new Error('No driver ID');
      const response = await fetch(`/api/fleet/driver-qualification-summary/${driverId}`);
      if (!response.ok) {
        const error = await response.text();
        throw new Error(error || 'Failed to fetch qualifications');
      }
      return response.json();
    },
    enabled: !!driverId,
    staleTime: 30000, // Cache for 30 seconds
    retry: 1,
  });
}

// ============================================
// HOOK: Check specific driver + trailer combo
// Used when hovering or selecting a trailer
// ============================================

export function useQualificationCheck(
  driverId: string | null, 
  trailerId: string | null,
  province: string = 'BC'
) {
  return useQuery<QualificationCheckResult>({
    queryKey: ['qualification-check', driverId, trailerId, province],
    queryFn: async () => {
      if (!driverId || !trailerId) throw new Error('Missing IDs');
      const response = await fetch('/api/fleet/check-driver-qualification', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ driverId, trailerId, province })
      });
      if (!response.ok) {
        const error = await response.text();
        throw new Error(error || 'Failed to check qualification');
      }
      return response.json();
    },
    enabled: !!driverId && !!trailerId,
    staleTime: 60000, // Cache for 1 minute
    retry: 1,
  });
}

// ============================================
// HOOK: Get all drivers qualified for a trailer
// Used when assigning a driver to a trailer
// ============================================

export function useQualifiedDrivers(trailerId: string | null) {
  return useQuery({
    queryKey: ['qualified-drivers', trailerId],
    queryFn: async () => {
      if (!trailerId) throw new Error('No trailer ID');
      const response = await fetch(`/api/fleet/trailer/${trailerId}/qualified-drivers`);
      if (!response.ok) {
        const error = await response.text();
        throw new Error(error || 'Failed to fetch qualified drivers');
      }
      return response.json();
    },
    enabled: !!trailerId,
    staleTime: 30000,
    retry: 1,
  });
}

// ============================================
// EXPORT TYPES for use in components
// ============================================

export type { 
  DriverQualificationSummary, 
  TrailerQualification, 
  QualificationCheckResult 
};

Tell Replit:

"Create a new file client/src/hooks/useDriverQualifications.ts with the hooks code above. This provides three hooks:

useDriverQualifications(driverId) - gets summary for all trailers
useQualificationCheck(driverId, trailerId) - checks one specific combo
useQualifiedDrivers(trailerId) - gets all drivers who can tow a trailer

Make sure @tanstack/react-query is already installed (it should be if you're using it elsewhere)."


Let me know when Step 1 is done and I'll give you Step 2 (QualificationBadge component)